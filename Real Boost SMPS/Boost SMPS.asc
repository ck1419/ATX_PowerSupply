Version 4
SHEET 1 2928 816
WIRE 240 16 48 16
WIRE 544 16 320 16
WIRE 656 16 544 16
WIRE 720 16 656 16
WIRE 1024 16 784 16
WIRE 1216 16 1024 16
WIRE 1392 16 1216 16
WIRE 1600 16 1392 16
WIRE 1792 16 1600 16
WIRE 1952 16 1856 16
WIRE 1824 80 1824 48
WIRE 48 128 48 16
WIRE 544 144 544 16
WIRE 1024 144 1024 16
WIRE 1216 144 1216 16
WIRE 1392 144 1392 16
WIRE 1600 144 1600 16
WIRE 1824 144 1824 80
WIRE 496 160 336 160
WIRE 496 208 448 208
WIRE 448 256 448 208
WIRE 1952 304 1952 16
WIRE 48 400 48 208
WIRE 336 400 336 160
WIRE 336 400 48 400
WIRE 448 400 448 336
WIRE 448 400 336 400
WIRE 544 400 544 224
WIRE 544 400 448 400
WIRE 1024 400 1024 208
WIRE 1024 400 544 400
WIRE 1216 400 1216 208
WIRE 1216 400 1024 400
WIRE 1392 400 1392 208
WIRE 1392 400 1216 400
WIRE 1600 400 1600 224
WIRE 1600 400 1392 400
WIRE 1824 400 1824 224
WIRE 1824 400 1600 400
WIRE 48 448 48 400
WIRE 448 576 448 464
WIRE 752 576 448 576
WIRE 1040 576 848 576
WIRE 1216 576 1040 576
WIRE 1632 576 1536 576
WIRE 1824 576 1632 576
WIRE 1952 576 1952 368
WIRE 1952 576 1824 576
WIRE 1248 656 1248 608
WIRE 1360 656 1248 656
WIRE 1472 656 1424 656
WIRE 1632 656 1632 576
WIRE 1632 656 1536 656
WIRE 1392 736 1392 688
WIRE 1632 736 1632 656
WIRE 1632 736 1536 736
FLAG 1600 16 Vout
FLAG 48 448 0
FLAG 656 16 Vin
FLAG 448 208 VSwitch
FLAG 48 16 DCin
FLAG 1952 16 Error
FLAG 448 576 PWM
FLAG 1040 576 ControlSignal
FLAG 1824 80 Vref
FLAG 1824 576 ErrorWithGain
SYMBOL voltage 48 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName DCin
SYMATTR Value 100
SYMBOL ind 224 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1.31m
SYMBOL diode 720 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL polcap 1008 144 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 0.47µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=400 Irms=12m Rser=1.58339 Lser=4.69174n mfg="Würth Elektronik" pn="860011373001 WCAP-ATG8 6,3x11" type="Al electrolytic"
SYMBOL res 1584 128 R0
SYMATTR InstName RLoad
SYMATTR Value {X}
SYMBOL sw 544 128 R0
SYMATTR InstName S1
SYMATTR Value Switch1
SYMBOL voltage 448 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vswitch
SYMATTR Value PULSE(0 1 0 0 0 7.5u 10u)
SYMBOL polcap 1200 144 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 0.47µ
SYMATTR InstName C2
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=400 Irms=12m Rser=1.58339 Lser=4.69174n mfg="Würth Elektronik" pn="860011373001 WCAP-ATG8 6,3x11" type="Al electrolytic"
SYMBOL polcap 1376 144 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 0.47µ
SYMATTR InstName C3
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=400 Irms=12m Rser=1.58339 Lser=4.69174n mfg="Würth Elektronik" pn="860011373001 WCAP-ATG8 6,3x11" type="Al electrolytic"
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 1808 48 R0
SYMATTR InstName U1
SYMBOL voltage 1824 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 400
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral 1520 544 R180
SYMATTR InstName U2
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional 1520 624 R180
SYMATTR InstName U3
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Derivative 1520 704 R180
SYMATTR InstName U4
SYMBOL LTspiceControlLibrary\\Math\\Operands\\add 1408 688 M0
SYMATTR InstName U5
SYMBOL LTspiceControlLibrary\\Math\\Operands\\add 1264 608 M0
SYMATTR InstName U6
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM 832 544 R180
SYMATTR Value Vin1=-350 Vin2=350 Tperiod=10u
SYMATTR InstName U7
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional 1920 320 R90
SYMATTR Value K=-1
SYMATTR InstName U8
TEXT 1984 -624 Left 2 !.tran 0 .02 0
TEXT 1984 -568 Left 2 !.model Switch1 SW(Ron=1 Roff=1Meg Vt=0.5 Vh=-0.4)
TEXT -24 -608 Left 2 !.meas voutmax max v(vout)
TEXT -16 -568 Left 2 !.meas voutavg avg v(vout) FROM 0.015 TO 0.02
TEXT 1992 -520 Left 2 !.step param X list 247 274.5 308.8 352.9 411.7 494.1
TEXT -8 -528 Left 2 !.meas ic_avg avg I(C1) FROM 0.015 TO 0.02
TEXT 16 -488 Left 2 !.meas iRload_avg avg I(RLoad) FROM 0.015 TO 0.02
TEXT 32 -448 Left 2 !.meas iL_avg avg I(L1) FROM 0.015 TO 0.02
TEXT 64 -408 Left 2 !.meas settle find V(Vout) when abs(v(Vout)- voutavg)/voutavg=0.05 fall=last
TEXT 88 -368 Left 2 !.meas rise time TRIG V(Vout)=(V(DCin)+0.1*(voutavg- V(DCin))) TD=0.2u RISE=1 TARG V(Vout)=(V(DCin)+0.9*(voutavg- V(DCin))) TD=0.2u RISE=1
TEXT 112 -328 Left 2 !.meas efficiency avg -V(Vout)*I(Rload)/V(DCin)/I(DCin) FROM 0.015 TO 0.02
