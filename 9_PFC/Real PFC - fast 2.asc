Version 4
SHEET 1 18456 1128
WIRE -256 -720 -272 -720
WIRE -192 -720 -256 -720
WIRE -64 -720 -128 -720
WIRE 32 -720 0 -720
WIRE 112 -720 32 -720
WIRE 272 -720 176 -720
WIRE 416 -720 336 -720
WIRE 464 -720 416 -720
WIRE -272 -688 -272 -720
WIRE 32 -624 32 -720
WIRE 48 -624 32 -624
WIRE 208 -624 112 -624
WIRE 304 -624 304 -688
WIRE 304 -624 272 -624
WIRE -272 -560 -272 -608
WIRE -160 -560 -160 -688
WIRE -160 -512 -160 -560
WIRE -240 -368 -256 -368
WIRE -144 -368 -240 -368
WIRE -16 -368 -80 -368
WIRE 112 -368 48 -368
WIRE 352 -368 224 -368
WIRE 528 -368 448 -368
WIRE 544 -368 528 -368
WIRE -112 -256 -112 -336
WIRE 16 -240 16 -336
WIRE -112 -224 -112 -256
WIRE 16 -224 16 -240
WIRE 176 -96 64 -96
WIRE 368 -96 240 -96
WIRE 544 -96 432 -96
WIRE 592 -96 544 -96
WIRE -352 16 -512 16
WIRE -208 16 -352 16
WIRE -144 16 -208 16
WIRE -64 16 -144 16
WIRE 64 16 64 -96
WIRE 64 16 -64 16
WIRE 96 16 64 16
WIRE 208 16 208 -64
WIRE 208 16 176 16
WIRE 240 16 208 16
WIRE 448 16 320 16
WIRE 544 16 448 16
WIRE 704 16 608 16
WIRE 848 16 704 16
WIRE 992 16 848 16
WIRE 1152 16 992 16
WIRE 1168 16 1152 16
WIRE -512 32 -512 16
WIRE -352 32 -352 16
WIRE -64 80 -64 16
WIRE 992 96 992 16
WIRE -512 112 -512 96
WIRE -512 112 -720 112
WIRE 448 112 448 16
WIRE -720 144 -720 112
WIRE 704 144 704 16
WIRE 848 144 848 16
WIRE -208 176 -208 16
WIRE -64 192 -64 160
WIRE 32 192 -64 192
WIRE 64 192 32 192
WIRE 400 192 256 192
WIRE -64 224 -64 192
WIRE 992 224 992 176
WIRE 1152 224 992 224
WIRE 1168 224 1152 224
WIRE 256 240 256 192
WIRE -720 256 -720 224
WIRE -352 256 -352 96
WIRE -352 256 -720 256
WIRE 112 256 80 256
WIRE 208 256 112 256
WIRE 992 256 992 224
WIRE -512 272 -512 112
WIRE -352 272 -352 256
WIRE 208 304 192 304
WIRE -512 400 -512 336
WIRE -352 400 -352 336
WIRE -352 400 -512 400
WIRE -208 400 -208 240
WIRE -208 400 -352 400
WIRE -64 400 -64 304
WIRE -64 400 -208 400
WIRE 192 400 192 304
WIRE 192 400 -64 400
WIRE 256 400 256 320
WIRE 256 400 192 400
WIRE 448 400 448 208
WIRE 448 400 256 400
WIRE 704 400 704 208
WIRE 704 400 448 400
WIRE 848 400 848 208
WIRE 848 400 704 400
WIRE 992 400 992 336
WIRE 992 400 848 400
WIRE -208 496 -208 400
FLAG 1152 16 Vout
FLAG 448 16 Vin
FLAG -208 496 0
FLAG 416 -720 Control
FLAG 1152 224 Vcontrol
FLAG -160 -560 Vcontrol
FLAG 32 192 ACRef
FLAG -112 -256 Control
FLAG -240 -368 ACRef
FLAG 16 -240 IndCurrent
FLAG 544 -96 IndCurrent
FLAG -144 16 RectACIn
FLAG 528 -368 PWMin
FLAG -256 -720 DC5V
FLAG -272 -560 0
FLAG 112 256 PWMin
SYMBOL ind2 224 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 3.135m
SYMATTR SpiceLine Rser=0.0033
SYMATTR Type ind
SYMBOL diode 544 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RFUS20TF6S
SYMBOL cap 688 144 R0
SYMATTR InstName C3
SYMATTR Value 680µ
SYMATTR SpiceLine V=450 Rser=110m
SYMBOL nmos 400 112 R0
SYMATTR InstName M1
SYMATTR Value R6015KNZ
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -176 -688 R0
SYMATTR InstName U2
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional -48 -688 R0
SYMATTR InstName U4
SYMATTR Value K=50
SYMBOL LTspiceControlLibrary\\Math\\Operands\\add 288 -688 R0
SYMATTR InstName U5
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional 128 -688 R0
SYMATTR Value K=0.00015
SYMATTR InstName U6
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional 64 -592 R0
SYMATTR InstName U8
SYMATTR Value K=0.9
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral 224 -592 R0
SYMATTR InstName U9
SYMBOL res 976 80 R0
SYMATTR InstName R5
SYMATTR Value 243.91
SYMBOL res 976 240 R0
SYMATTR InstName R6
SYMATTR Value 3.09
SYMBOL voltage -720 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 230 50)
SYMBOL diode -496 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value RFUS20TF6S
SYMBOL diode -336 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value RFUS20TF6S
SYMBOL diode -496 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value RFUS20TF6S
SYMBOL diode -336 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value RFUS20TF6S
SYMBOL res -80 64 R0
SYMATTR InstName R12
SYMATTR Value 22900k
SYMBOL res -80 208 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL LTspiceControlLibrary\\Math\\Operands\\mul -128 -336 R0
SYMATTR InstName U11
SYMBOL res 192 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 0.01
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 192 -64 R0
SYMATTR InstName U12
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Proportional 384 -64 R0
SYMATTR Value K=15
SYMATTR InstName U13
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 0 -336 R0
SYMATTR InstName U14
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit 128 -336 R0
SYMATTR Value y=-29m z=29m
SYMATTR InstName U15
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM 368 -336 R0
SYMATTR Value Vin1=-30m Vin2=30m Tperiod=10u
SYMATTR InstName U16
SYMBOL cap -224 176 R0
SYMATTR InstName C1
SYMATTR Value 0.47µ
SYMATTR SpiceLine V=630 Rser=0.0363103
SYMBOL cap 832 144 R0
SYMATTR InstName C2
SYMATTR Value 680µ
SYMATTR SpiceLine V=450 Rser=110m
SYMBOL voltage -272 -704 R0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL e 256 224 R0
SYMATTR InstName E1
SYMATTR Value 10
TEXT -88 472 Left 2 !.tran 0 1 0 uic
TEXT -1040 -720 Left 2 !.MODEL R6015KNZ NMOS\n+ LEVEL=3\n+ L=2.0000E-6\n+ W=1\n+ KP=29.715E-6\n+ RS=15.800E-3\n+ RD=0\n+ VTO=4.4948\n+ RDS=6.0000E6\n+ TOX=2.0000E-6\n+ CGSO=1000p\n+ CGDO=1.5p\n+ CBD=0\n+ RG=0\n+ N=2\n+ RB=1.0000E-3\n+ GAMMA=2.7\n+ ETA=0.00005\n+ KAPPA=0\n+ NFS=22G
TEXT -1048 -48 Left 2 !.save V(Vout) I(L1) I(V1) dialogbox
